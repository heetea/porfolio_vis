## 포트폴리오 비주얼라이져 백테스트 일별 수익률 코드

main.py 파일을 수정하여 실행합니다.

    import porfolio_vis as pv
    pv.action(data_list=['002200','005930','005380','000660'], 포트폴리오에 넣고 싶은 종목을 리스트에 넣어주세요
              ratio_list=[0.1,0.4,0.2,0.3], 종목들의 비중을 넣어주세요
              country='kr', 종목들의 나라를 넣어주세요 한국이면 kr 미국이면 us 입니다.
              window_hold='Q', 리밸런싱할 주기를 넣어주세요 M: 1개월, Q: 1분기, Y: 1년 입니다.
              rebalancing_date=-5) 리밸런싱할 날짜를 넣어주세요 0은 해당 주기의 첫날, -1은 해당주기의 마지막날입니
# 수익률 계산

전략 모델 계산후에 수익률을 계산하고 그래프를 그리는 코드

아래 코드를 통해  cal_return Class를 불러온다.

> from cal_return import cal_return

## 일별 일반 수익률

t-1 시점에 가치가 Pt-1인 어떤 자산에 투자를 한 뒤, t 시점에 그 자산의 가치가 Pt 가 되었다면 투자수익률 Rt 는 일반적으로 아래와 같이 구할 수 있다.

>![](http://tedware.kr/wp-content/uploads/2019/09/co0013.png)

이를 일반수익률이라 하자.

일별 일반 수익률, 자산비중을 매개변수로 class를 생성한다.

>#수익률  
>a = [[0.1,0.2,0.3,0.4],[0.22,0.51,0.01,0.05]]  
>#자산비중  
>b = [[0.1,0.2,0.3,0.4],[0.22,0.22,0.22,0.34]]   
>#클래스 생성  
>calculate_yield = Yield(a,b)

## 비중 포함된 단리 수익률

주식과 ETF 전략에서는 여러개의 상품을 시기별로 비중을 다르게 보유한다.
항목별 수익률로부터 비중이 계산된 전체 자산의 수익률을 계산한다.

코드

>#비중처리된 단일수익률  
>cal_return.weighted_day_yield()

## 누적 단리 수익률

초기 투자 금액이 100원이라고 치자. 가치가 상승해서 150원이 되었어도 50원 인출하고, 가치가 감소하여 50원이 되어도 50을 추가로 투자하여 매일 100원씩 투자할때 총 이익을 누적 단리 수익률이라고 하자.
코드는 아래와 같다.

> #매일매일 누적단리 수익률  
> calculate_yield.cumulative_sum()

## 누적 복리 수익률

초기 투자 금액이 100원이라고 치자. 가치가 상승해서 150원이 되면 150원을 그대로 재투자하는것을  누적 복리 수익율이라고 하자
코드는 아래와 같다.

>#누적 복리 수익률  
>calculate_yield.compound_yield()

## 리밸런싱 기간별 복리 수익률

누적 복리와 누적 단리는 비현실적이다.
매일매일 같은 금액을 투자하는것도 불가능 하고 이득을 보았는데 인출하지 않는 것도 불가능하다.
일정한 리밸런싱 기간을 정해놓고 그기간의 복리수익률이 단리로 합쳐지는것이 현실적이다,
즉,리밸런싱기간이 3개월이고 1월 1일의 가치가 100원, 3월 1일 가치가 200원, 6월 1일의 가치가 300원이라면
1월1일부터 6월 1일까지의  리밸런싱 기간별 복리 수익률은
1월 1일부터 3월 1일까지의 복리수익률 + 3월 1일부터 6월 1일부터 복리수익률이다.

코드는 아래와 같다.

>#리밸런싱 기간별 수익률 예) [1-3월까지 누적 수익률, 3월부터 6월까지 누적수익률....]  
>calculate_yield.periodic_yield(30) #리밸런싱 기간 입력    
>#리밸런싱 가간별 수익률 단리누적  
>calculate_yield.periodic_cumulative_sum(30) #리밸런싱 기간 입력



